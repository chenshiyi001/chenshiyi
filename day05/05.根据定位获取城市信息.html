<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>


  <button>获取当前城市信息</button>
  <!-- <script src="http://api.map.baidu.com/geocoder/v2/?ak=C93b5178d7a8ebdb830b9b557abce78b&callback=renderReverse&location=22.62,114.07&output=json&pois=0"></script> -->
  <script>
    function renderReverse(data){
      console.log(data.result.addressComponent.city)
    }
    document.querySelector("button").onclick = function(){
      // 获取经纬度
      navigator.geolocation.getCurrentPosition(function(p){
        var script = document.createElement("script")
        script.src = 'http://api.map.baidu.com/geocoder/v2/?ak=C93b5178d7a8ebdb830b9b557abce78b&callback=renderReverse&location='+p.coords.latitude+','+p.coords.longitude+'&output=json&pois=0'
        document.body.appendChild(script)        
      // console.log(p.coords.latitude)
      // console.log(p.coords.longitude)
      
    })
    }

  </script>


  <!-- <script>
    function renderReverse(data) {
      console.log(data)
    }
  </script> -->

  <!-- 它会根据地址区请求对应的文件或者数据  并且是不会有跨域问题 
      jsonp处理跨域问题 通过script标签请求不会跨域来实现
      jsonp只能处理get请求
  -->
  <!-- <script
    src="http://api.map.baidu.com/geocoder/v2/?ak=C93b5178d7a8ebdb830b9b557abce78b&callback=renderReverse&location=22.62,114.07&output=json&pois=0"></script> -->







  
  <!-- <script>  
    // navigator.geolocation.getCurrentPosition(function(p){
    //   // console.log(p.coords.latitude)
    //   // console.log(p.coords.longitude)
    //   var xhr = new XMLHttpRequest()
    //   xhr.open("get",'http://api.map.baidu.com/geocoder/v2/?ak=C93b5178d7a8ebdb830b9b557abce78b&callback=renderReverse&location='+p.coords.latitude+','+p.coords.longitude+'&output=json&pois=0')
    //   // 发送请求跨域了
    //   xhr.send(null)
    // })


    // 通过jsonp请求跨域





  </script> -->

</body>

</html>